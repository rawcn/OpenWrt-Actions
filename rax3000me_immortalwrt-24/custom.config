#=================================================#
# 1. 目标平台与设备 (Target)
#=================================================#
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_filogic=y
CONFIG_TARGET_mediatek_filogic_DEVICE_cmcc_rax3000me=y

#=================================================#
# 2. 核心网络优化 (Network Optimization)
#=================================================#
# 启用 TurboACC 网络加速中心 (核心组件)
CONFIG_PACKAGE_luci-app-turboacc=y
# 包含 BBR 拥塞控制算法 (对抗移动网络丢包)
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_BBR_CCA=y
# 包含 流量卸载 (Filogic 硬件加速必备)
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_OFFLOADING=y
# 启用多核中断负载均衡 (提升 USB 网卡吞吐性能)
CONFIG_PACKAGE_irqbalance=y
# 启用 TTL 修改模块 (用于防热点检测)
CONFIG_PACKAGE_kmod-ipt-ipopt=y
# 启用 nftables 硬件卸载支持
CONFIG_PACKAGE_kmod-nft-offload=y

#=================================================#
# 3. 科学上网与 DNS (Proxy & DNS)
#=================================================#
# [新增] HomeProxy (基于 Sing-box 的现代化轻量级代理)
CONFIG_PACKAGE_luci-app-homeproxy=y
CONFIG_PACKAGE_luci-i18n-homeproxy-zh-cn=y
# 确保 Sing-box 内核被选中
CONFIG_PACKAGE_sing-box=y

# [新增] SmartDNS (高性能本地 DNS 服务器)
CONFIG_PACKAGE_luci-app-smartdns=y
CONFIG_PACKAGE_luci-i18n-smartdns-zh-cn=y
CONFIG_PACKAGE_smartdns=y

# [移除] 之前的重型/冲突插件
# CONFIG_PACKAGE_luci-app-openclash is not set
# CONFIG_PACKAGE_luci-app-mosdns is not set
# CONFIG_PACKAGE_luci-app-adguardhome is not set

#=================================================#
# 4. USB 共享网络驱动 (USB Tethering)
#=================================================#
# USB 核心与基本协议
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-net=y
CONFIG_PACKAGE_kmod-usb-net-rndis=y
CONFIG_PACKAGE_kmod-usb-net-cdc-ether=y
# NCM 协议 (安卓手机首选，高性能)
CONFIG_PACKAGE_kmod-usb-net-cdc-ncm=y
CONFIG_PACKAGE_kmod-usb-net-huawei-cdc-ncm=y
# 4G/5G 模组常用协议
CONFIG_PACKAGE_kmod-usb-net-qmi-wwan=y
CONFIG_PACKAGE_luci-proto-qmi=y

#=================================================#
# 5. 存储与文件系统 (Storage)
#=================================================#
# [新增] EXT4 文件系统支持 (最稳)
CONFIG_PACKAGE_kmod-fs-ext4=y
# [新增] EXT4 格式化与修复工具
CONFIG_PACKAGE_e2fsprogs=y
# 自动挂载工具
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_luci-app-diskman=y
CONFIG_PACKAGE_luci-i18n-diskman-zh-cn=y

# [移除] Samba 文件共享
# CONFIG_PACKAGE_luci-app-samba4 is not set
# CONFIG_PACKAGE_samba4-server is not set
# CONFIG_PACKAGE_luci-i18n-samba4-zh-cn is not set
# CONFIG_PACKAGE_wsdd2 is not set


#=================================================#
# 6. 实用工具箱 (Utilities)
#=================================================#
# [新增] bind-dig: DNS 诊断神一
CONFIG_PACKAGE_bind-dig=y
# [新增] curl: 命令行下载/请求
CONFIG_PACKAGE_curl=y
# [新增] iperf3: 局域网测速
CONFIG_PACKAGE_iperf3=y
# [新增] htop: 更好的进程监控
CONFIG_PACKAGE_htop=y

# Bash Shell
CONFIG_PACKAGE_bash=y
# USB 工具
CONFIG_PACKAGE_usbutils=y
#=================================================#
# [核心修复] 代理必备的内核依赖 (Proxy Kernel Modules)
#=================================================#
# 修复 Momo/Clash 报错的关键：Socket 匹配模块
CONFIG_PACKAGE_kmod-nft-socket=y
# 透明代理核心模块 (TPROXY)
CONFIG_PACKAGE_kmod-nft-tproxy=y
# 虚拟网卡驱动 (Tun模式必备)
CONFIG_PACKAGE_kmod-tun=y
# IP集支持 (高性能匹配)
CONFIG_PACKAGE_kmod-nft-ipset=y
# 桥接流量监控 (某些模式需要)
CONFIG_PACKAGE_kmod-nft-bridge=y

#=================================================#
# [网络优化] 针对 MT7981/Filogic 的优化
#=================================================#
# 启用 Fullcone NAT (游戏/P2P 优化，强烈推荐)
CONFIG_PACKAGE_kmod-nft-fullcone=y
# 确保 Shortcut Forwarding 引擎开启
CONFIG_PACKAGE_kmod-shortcut-fe=y
CONFIG_PACKAGE_kmod-shortcut-fe-cm=y


CONFIG_PACKAGE_gzip=y
#=================================================#
# [性能优化] 内存压缩 (ZRAM)
#=================================================#
# 启用 ZRAM 交换分区
CONFIG_PACKAGE_zram-swap=y
# 启用 ZRAM 自动配置脚本
CONFIG_PACKAGE_kmod-zram=y
# 设置 ZRAM 压缩算法为 zstd (平衡性能与压缩率)
CONFIG_PACKAGE_kmod-lib-zstd=y
#=================================================#
# [其他推荐] 补充实用插件
#=================================================#
# 预装 nano 编辑器 (比 vi 好用)
CONFIG_PACKAGE_nano=y
# 预装 Docker (RAX3000M 性能足够跑简单的容器，可选)
# CONFIG_PACKAGE_luci-app-dockerman is not set

#=================================================#
# 7. LuCI 界面与主题 (GUI)
#=================================================#
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y
CONFIG_PACKAGE_luci-i18n-argon-config-zh-cn=y
# 高级设置
CONFIG_PACKAGE_luci-app-advanced-settings=y
#=================================================#
# [硬件加速] MT7981 专用卸载驱动
#=================================================#
# 确保联发科专用 WED 卸载开启 (WiFi 提速关键)
CONFIG_PACKAGE_kmod-mediatek_wed=y
# 确保 PPE 硬件加速开启
CONFIG_PACKAGE_kmod-mtk-ppe=y
# 确保硬件 NAT 支持
CONFIG_PACKAGE_kmod-nft-offload=y
#=================================================#
# 8. 依赖库清理 (Library Cleanup)
#=================================================#
# 确保必要的依赖被选中
CONFIG_PACKAGE_libcap=y
CONFIG_PACKAGE_libcap-ng=y
CONFIG_PACKAGE_libcurl=y
CONFIG_PACKAGE_libopenssl=y
CONFIG_PACKAGE_libstdcpp=y
